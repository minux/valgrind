
---------- Legend --------------------------------------------------

n-i-bz  = not in bugzilla
pending = is scheduled to be fixed (or at least considered) on this branch
wontfix = will not fix on this branch
many    = fix composed of many commits
WF      = waiting for feedback from bug reporter

PRI: 33  = fix this for 3.3.1
     Vfd = fix has been verified on 3.3.X branch


---------- Bugs reported after (in) 3.3.0 --------------------------

*** definitely fix
### merge fix to 3.3 branch
??? marginal
NNN won't fix

-- Last updated 9 May 08

tidy up static int linux_kernel_2_6_22(void) (syswrap-linux.c)

check r7322 is merged to branch
and 7324 ?
7334
7347
7350
7355

get rid of pointless constraint !(--db-attach=yes &&
--trace-children=yes) (users, 14 feb)

utimensat syswrap bug (Kegel, users, 24 Feb)
### FIXED r8047

Consider potential space/time effects of r7383 (see reply to
the commit message).

Either back out r7353, or fix the resulting signedness problem
properly (see replies to the commit message).  (now fixed ...)

re Keller vpath bug, don't use attached patch; use Ashley's one
instead (on @dev ?)

***
disInstr(ppc): unhandled instruction: 0x7D295F1E (users@, 29 Feb)
(0x7D295F1E == isel r9,r9,r11,28)

64 bit tweak ("Solomon, Bernard", user@, 25 Mar, > 1 post the same day)
FIXED r8048.  (don't merge)

NNN
disInstr(ppc): unhandled instruction: 0x7C1F42A6
                 primary 31(0x1F), secondary 678(0x2A6)
 "Gupta Richa", users@, 3 Apr 08
 dis_proc_ctl(ppc)(mfspr,SPR)(0x11F)
 (0x7C1F42A6 == mfsprg  r0,7)

--- start 27 March 08 ---

92456:  Tracing the origin of uninitialised memory
        FIXED

126389  (fxrstr) vex x86->IR: unhandled instruction bytes:
###     0xF 0xAE 0x4D 0xF0 
        == 158525 Valgrind doesn't recognise fxrstor instruction
        FIXED trunk r1836, (test) r1837
        MERGE

149878  add (proper) check for calloc integer overflow
***     (possibly with a viable patch now)
        FIXME

152818  (repz lodsb) vex x86->IR: unhandled instruction bytes:
###     0xF3 0xAC 0xFC 0x9C
        FIXED trunk r1838 (+ test case bug152818_2.c ?)

153196  (repnz cmpsb) vex x86->IR: unhandled instruction bytes: 0xF2
###     0xA6 0x89 0x45
        FIXED trunk r1834

155528  valgrind cupinfo reports a CPU, which does not reflect
###     valgrind's instruction set.
        Core2/ssse3 support in the trunk:
           vx1808, vx1809, vx1810, 
           r7384, r7385, r7387, r7389.
        (in essence #155528)
        FIXED, MERGE

156065  VALGRIND_MEMPOOL_ALLOC vs. zero-size allocs triggers false
***     "overlapping" error
        FIXME

156404  Unable to start oocalc under memcheck on openSUSE 10.3 (64-bit)
???     openoffice on suse 10.3 readlink stack problem
        POTENTIALLY SERIOUS (need to extend root stack before syscall)

157748  valgrind seems to not recognize what would be sse2
###     instructions
        FIXED vx1835, MERGE

158042  --db-attach at invalid free() gives broken stack trace on
        x86_64

158212  Locks taken by pthread_rwlock_tryrdlock and
###     pthread_rwlock_trywrlock not recognised by helgrind
        r7454: Intercept pthread_rwlock_try{rd,wr}lock.
        MERGE

158425  sys_poll incorrectly emulated when RES==0
####    FIXED r8049

158730  ppc: illegal opcode crash on instruction fctiwz
???     Not sure this does have anything to do with fctiwz.
        VEX generates code that doesn't run on e500

158744  Valgrind fails to handle interlocked instructions on extended
***     registers (r8, etc) on amd64 (vex amd64->IR: unhandled
        instruction bytes: 0xF0 0x41 0xF 0xC0 0x87 0xB8)
        Patch posted; waiting for response.

159285  unhandled syscall:25
???     (no test case provided)

159452  unhandled ioctl 0x8B01 on "valgrind iwconfig"
???     (queried user on documentation for this ioctl)

159501  incorrect handling of ALSA ioctls
***     (has two patches, looks reasonable, checking for update)

159659  scas does not use ES segment selector
NNN

159720  Opcode 0xFF 0x58 0xEB 0x5 unhandled on x86
NNN     (this is a "lcall" or callf -- far call)
        (no test case)

160595  Why my program hang-up when work with valgrind ?
NNN     (no info so far, probably a threading bug in client)

160872  race errors reported where libpthread.so
???     (might be a problem with pthread_setspecific)

160907  Support for a couple of recent Linux syscalls, syscall wrapper
###     bugfixes
        FIXED 7917,8051

160954  ppc build of valgrind crashes with illegal instruction
***     0x7D6B4F9E == isel r11,r11,r9,30
        == 161251

160956  PATCH: mallinfo implementation
###     FIXED r7888

161285  Patch -- support for eventfd() syscall
###     7917

161374  SYS_readdir syscall not implemented
???     readdir is pretty prehistoric

161378  illegal opcode in debug libm
        == 160136
###     FIXED vx1826

161487  number of suppressions files is limited to 10
***     Patch exists, or a very lazy fix

161609  Results returned by VG_(get_StackTrace)() do not match
***     its documentation

--- end 8 May 08 ---


### r1816 (x86 CondNS after SUBB)
### r1817 (amd64 CondNS after SUBB)
### r1833 (both, CondNZ after SUBW)

*** !!ppc32-linux memcheck craps out on some Altivec code!
    (none/tests/ppc32/jm-insns -a -v)
    (I think this is fixed in trunk now; check)

*** !!massif segfaults on ooo on amd64
    23-deep recursive calls to pp_snapshot_SXPt

r7795 (handle r-x mapped .bss sections - merge to trunk)


TRUNK   33BRANCH  PRI    BUG#  WHAT

r7299   pending    33  n-i-bz  stupid sizeof bug in Helgrind
r7322   pending    33  n-i-bz  check fd on sys_llseek
r7323   pending    33  n-i-bz  update syscall lists to kernel 2.6.23.1
r7324   pending    33  n-i-bz  support sys_sync_file_range

r7334   pending    33  n-i-bz  handle sys_sysinfo, sys_getresuid,
                               sys_getresgid on ppc64-linux

r7350   pending    33  n-i-bz  intercept memcpy in 64-bit ld.so's

vx1807  pending    33  155011  vex x86->IR: 0xCF (iret)

r7347   pending    33  155091  Warning [...] unhandled DW_OP_ opcode 0x23
                               (patch proposed, waiting for feedback)
                       ==156960

r7355   r7356      33  155929  ms_print fails on massif outputs 
                               containing long lines

r7361   r7362      33  n-i-bz  ms_print broken for --time-unit=ms

r7399   pending    33  157665  valgrind fails on shmdt(0) after shmat to 0

r7895   pending    33  161036  exp-drd: client allocated memory was never freed
